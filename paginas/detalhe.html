<!doctype html>
<html lang="pt-br" class="light">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ficha do Aluno — SAE</title>
  
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght@100..700&display=swap" rel="stylesheet" />
  
  <link rel="stylesheet" href="../css/base.css" />
  <link rel="stylesheet" href="../css/detalhe.css" />
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>

  <div class="layout-wrapper">
    
    <aside class="sidebar">
      <div class="sidebar__conteudo">
        <div class="brand">
          <div class="brand__icone">
            <img src="../img/KBT_logo2.png" alt="Logo KBT" class="logo-icon">  
          </div>
          <div class="brand__texto">
            <h1 class="brand__titulo">SAE</h1>
            <p class="brand__subtitulo">Sistema de aula experimental</p>
          </div>
        </div>

        <nav class="menu">
          <a class="menu__item" href="/paginas/admin.html"><span class="material-symbols-outlined">dashboard</span><span>Painel</span></a>
          <a class="menu__item" href="/paginas/admin-coachs.html"><span class="material-symbols-outlined">groups</span><span>Coaches</span></a>
          <a class="menu__item" href="/paginas/agendamentos.html"><span class="material-symbols-outlined">calendar_today</span><span>Agendamentos</span></a>
          <a class="menu__item" href="/paginas/pos-aula.html"><i data-lucide="repeat-2"></i><span>Pós-aula</span></a>
          <a class="menu__item" href="/paginas/relatorio.html"><i data-lucide="chart-line"></i><span>Relatórios</span></a>
          
          <div class="menu__rodape">
            <button id="btnSair" class="menu__item menu__item--botao" type="button">
              <i data-lucide="log-out"></i><span>Sair</span>
            </button>

            <p id="usuarioAdmin" class="sidebar__usuario">Usuário: —</p> 
          </div>
        </nav>
      </div>
    </aside>

    <main class="main-content">
      
      <header class="topbar-dashboard">
        <div class="breadcrumbs">
           <a href="javascript:history.back()" class="link-voltar">
             <span class="material-symbols-outlined">arrow_back</span> Voltar / Alunos / Ficha Técnica
           </a>
        </div>
        
      </header>

      <div class="dashboard-container">
        
        <section class="profile-header-card">
          <div class="profile-info">
           
             <div>
               <h1 id="detAluno">Carregando...</h1>
               <div class="profile-meta">
                 <span class="material-symbols-outlined">call</span> <span id="detWhatsapp">—</span>
                 <span class="dot-separator">•</span>
                 <span class="material-symbols-outlined">calendar_today</span> <span id="detData">—</span>
               </div>
             </div>
          </div>
          
        </section>

        <div class="dashboard-grid">
          
          <div class="col-left">
            <div class="card card-mini-resumo">
                <div class="data-row-compact">
                  <span class="label-mini">TIPO</span>
                  <strong id="detTipo">—</strong>
                </div>
                <div class="data-row-compact">
                  <span class="label-mini">STATUS</span>
                  <div class="profile-status">
            <span id="badgeStatus" class="status-pill">Pendente</span>
            
          </div>
                </div>
            </div>

            <div class="card card-section card-forms-container">
               <h3><span class="material-symbols-outlined">assignment</span> Questionário (Forms)</h3>
               <div id="detFormRaw" class="lista-detalhes-vertical">
               </div>
            </div>
          </div>

          <div class="col-center">
             <section class="card card-main-display">
                <div class="card-header">
                  <h3><span class="material-symbols-outlined">analytics</span> Avaliação Técnica</h3>
                  <span class="tag-version">HOJE</span>
                </div>

                <div id="seletorCategoria" style="margin: 20px 0; display: none;">
                  <p class="label-input">Categoria do Aluno:</p>
                  <div class="toggle-buttons">
                    <button type="button" class="btn-toggle" id="btnRelAdulto">Adulto</button>
                    <button type="button" class="btn-toggle" id="btnRelKids">Kids</button>
                  </div>
                </div>

                <div id="containerFeedbackCoach" style="display: none;">
                  <form id="formRelatorioVivencia">
                    <div id="camposRelatorio" class="grid-notas"></div>
                    
                    <div class="insight-area">
                        <p class="label-input">Coach Insight (Automático):</p>
                        <textarea id="txtTraducaoPratica" placeholder="O sistema sugerirá..."></textarea>
                    </div>

                    <div id="recomendacaoArea" class="rec-box">
                        <p>RECOMENDAÇÃO SUGERIDA</p>
                        <div id="textoRecomendacaoAuto">Selecione as notas...</div>
                    </div>

                    <button type="submit" class="btn btn--primario btn-full">Salvar Relatório</button>
                  </form>
                </div>

                <div id="containerFeedbackAdmin" style="display: none;">
                    <button id="btnExportarPDFVivencia" class="btn btn--secundario btn-full">
                        <span class="material-symbols-outlined">picture_as_pdf</span> Exportar PDF
                    </button>
                    <div id="leituraRelatorio" class="feedback-admin-box"></div>
                </div>
             </section>
          </div>

          <div class="col-right">
            <div class="card card-section highlight-card">
              <h3><span class="material-symbols-outlined"></span> Gestão do aluno</h3>
              
              <div class="acoes-buttons-stack">
                <a id="btnWhatsapp" class="btn btn--whatsapp" target="_blank">
                  <span class="material-symbols-outlined">chat</span> WhatsApp
                </a>

                <div id="containerAdminAcoes" class="admin-stack" style="display: none;">
                    <div class="row-buttons">
                      <button id="btnConfirmar" class="btnConfirmar">Confirmar</button>
                      <button id="btnFaltou" class="btn btn--erro">Faltou</button>
                    </div>
                    
                    <label class="check-recepcao-styled">
                        <input type="checkbox" id="checkRecepcao"> 
                        <span>Levou à recepção?</span>
                    </label>

                    <section id="secaoAdminVenda" class="card-warning" style="display: none;">
                        <div class="admin-venda-wrapper">
                        <span>Matriculado?</span>
                        <input type="checkbox" id="checkMatriculado">
                        </div>
                    </section>
                </div>
              </div>
            </div>
          </div> 
          </div>
      </div>
    </main>
  </div>

  <script type="module" src="../js/guardas.js"></script>
  <script type="module" src="../js/professor.detalhe.js"></script>
  <script>
    // Inicializa icones Lucide
    lucide.createIcons();
  </script>
  
  <script>
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('../sw.js');
  }
</script>

</body>
</html>